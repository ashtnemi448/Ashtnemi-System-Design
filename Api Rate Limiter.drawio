<mxfile host="app.diagrams.net" modified="2021-12-12T13:53:58.301Z" agent="5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.54 Safari/537.36" etag="fPEOL1VO_J7ptb36HkVh" version="15.9.4" type="github">
  <diagram id="d1l8vrkPL_pD1Ji8koLj" name="Page-1">
    <mxGraphModel dx="1422" dy="754" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="qwF4lUakztrEEILu9ItJ-1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="qwF4lUakztrEEILu9ItJ-2" target="qwF4lUakztrEEILu9ItJ-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-2" value="Client&amp;nbsp;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="67" y="555" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="qwF4lUakztrEEILu9ItJ-4" target="qwF4lUakztrEEILu9ItJ-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-4" value="Api&lt;br&gt;&amp;nbsp;Gateway" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="267" y="365" width="50" height="440" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-5" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="414" y="555" width="160" height="70" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-6" value="" style="group" parent="qwF4lUakztrEEILu9ItJ-5" vertex="1" connectable="0">
          <mxGeometry x="30" width="130" height="70" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-7" value="Api Rate Limiter&amp;nbsp;" style="rounded=0;whiteSpace=wrap;html=1;" parent="qwF4lUakztrEEILu9ItJ-6" vertex="1">
          <mxGeometry x="10" y="10" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-8" value="Api Rate Limiter&amp;nbsp;" style="rounded=0;whiteSpace=wrap;html=1;" parent="qwF4lUakztrEEILu9ItJ-6" vertex="1">
          <mxGeometry width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-9" value="Actual Api&amp;nbsp;" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="641" y="555" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="qwF4lUakztrEEILu9ItJ-8" target="qwF4lUakztrEEILu9ItJ-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-11" value="&lt;h1&gt;Functional req&lt;/h1&gt;&lt;p&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Allow at max 3 req per sec&lt;/li&gt;&lt;li&gt;Drop other request&amp;nbsp;&lt;/li&gt;&lt;li&gt;We may tolerate some more some times&amp;nbsp;&lt;/li&gt;&lt;li&gt;design a plug and play service&lt;/li&gt;&lt;li&gt;distributed solution&amp;nbsp;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="501" y="230" width="260" height="150" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-12" value="DB" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="710" y="790" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-13" value="This DB will hold&amp;nbsp;&lt;br&gt;a table containing&amp;nbsp;&lt;br&gt;&lt;ol&gt;&lt;li&gt;usernane&amp;nbsp;&lt;/li&gt;&lt;li&gt;max number of req/min&lt;/li&gt;&lt;li&gt;timstam&lt;/li&gt;&lt;/ol&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="810" y="780" width="180" height="100" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-14" value="Actual Api&amp;nbsp;" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="651" y="565" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-15" value="&lt;h1&gt;Work flow&amp;nbsp;&lt;/h1&gt;&lt;p&gt;This is a distributed design. when first req for 123 comes to ARL curr is decremented and timestamp is incremented by 1 min&amp;nbsp;&lt;/p&gt;&lt;p&gt;Now if some req comes within that timestamp the curr is decremented&amp;nbsp;&lt;/p&gt;&lt;p&gt;if curr time is within timestamp and curr =0 req is dropped&lt;/p&gt;&lt;p&gt;if curr time is &amp;gt; timestamp then curr is made equal to limit and timestamp is equally to curr timestamp +1 min&amp;nbsp;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="591" y="1009" width="650" height="160" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-16" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="10" y="920" width="480" height="120" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-17" value="" style="shape=table;html=1;whiteSpace=wrap;startSize=0;container=1;collapsible=0;childLayout=tableLayout;" parent="qwF4lUakztrEEILu9ItJ-16" vertex="1">
          <mxGeometry x="81" y="99" width="360" height="120" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-18" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="qwF4lUakztrEEILu9ItJ-17" vertex="1">
          <mxGeometry width="360" height="40" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-19" value="username&amp;nbsp;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="qwF4lUakztrEEILu9ItJ-18" vertex="1">
          <mxGeometry width="123" height="40" as="geometry">
            <mxRectangle width="123" height="40" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-20" value="limit&amp;nbsp;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="qwF4lUakztrEEILu9ItJ-18" vertex="1">
          <mxGeometry x="123" width="124" height="40" as="geometry">
            <mxRectangle width="124" height="40" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-21" value="timestamp" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="qwF4lUakztrEEILu9ItJ-18" vertex="1">
          <mxGeometry x="247" width="113" height="40" as="geometry">
            <mxRectangle width="113" height="40" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-22" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="qwF4lUakztrEEILu9ItJ-17" vertex="1">
          <mxGeometry y="40" width="360" height="40" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-23" value="123" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="qwF4lUakztrEEILu9ItJ-22" vertex="1">
          <mxGeometry width="123" height="40" as="geometry">
            <mxRectangle width="123" height="40" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-24" value="3" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="qwF4lUakztrEEILu9ItJ-22" vertex="1">
          <mxGeometry x="123" width="124" height="40" as="geometry">
            <mxRectangle width="124" height="40" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-25" value="1200" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="qwF4lUakztrEEILu9ItJ-22" vertex="1">
          <mxGeometry x="247" width="113" height="40" as="geometry">
            <mxRectangle width="113" height="40" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-26" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="qwF4lUakztrEEILu9ItJ-17" vertex="1">
          <mxGeometry y="80" width="360" height="40" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-27" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="qwF4lUakztrEEILu9ItJ-26" vertex="1">
          <mxGeometry width="123" height="40" as="geometry">
            <mxRectangle width="123" height="40" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-28" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="qwF4lUakztrEEILu9ItJ-26" vertex="1">
          <mxGeometry x="123" width="124" height="40" as="geometry">
            <mxRectangle width="124" height="40" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-29" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="qwF4lUakztrEEILu9ItJ-26" vertex="1">
          <mxGeometry x="247" width="113" height="40" as="geometry">
            <mxRectangle width="113" height="40" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-30" value="curr" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;strokeColor=default;fillColor=none;" parent="qwF4lUakztrEEILu9ItJ-16" vertex="1">
          <mxGeometry x="441" y="99" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-31" value="3" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;strokeColor=default;fillColor=none;" parent="qwF4lUakztrEEILu9ItJ-16" vertex="1">
          <mxGeometry x="441" y="139" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-32" value="" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;strokeColor=default;fillColor=none;" parent="qwF4lUakztrEEILu9ItJ-16" vertex="1">
          <mxGeometry x="441" y="179" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-33" value="&lt;h1&gt;Functions for Api Gateway&amp;nbsp;&lt;/h1&gt;&lt;p&gt;&lt;/p&gt;&lt;ol&gt;&lt;li&gt;Req protocol translation&amp;nbsp;&lt;/li&gt;&lt;li&gt;Authentication&amp;nbsp;&lt;/li&gt;&lt;li&gt;Instead of hardcoding endpoints for each link in client/app/website we just send path of API i.e - /store , /home./feed to API gateway and gateway will figure out which microservice to call&amp;nbsp;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="qwF4lUakztrEEILu9ItJ-16" vertex="1">
          <mxGeometry x="150" y="-100" width="310" height="180" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-34" value="Memcache" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="444" y="660" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-35" value="Memcache" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="454" y="670" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0;entryDx=0;entryDy=52.5;entryPerimeter=0;" parent="1" source="qwF4lUakztrEEILu9ItJ-37" target="qwF4lUakztrEEILu9ItJ-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-37" value="Memcache" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="464" y="680" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-38" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.308;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="qwF4lUakztrEEILu9ItJ-8" target="qwF4lUakztrEEILu9ItJ-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="qwF4lUakztrEEILu9ItJ-39" value="There will be some consistency issues due to latency&amp;nbsp;&lt;br&gt;which is generally low&amp;nbsp;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;sketch=0;" parent="1" vertex="1">
          <mxGeometry x="499" y="790" width="60" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
